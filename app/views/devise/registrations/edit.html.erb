<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= render "devise/shared/error_messages", resource: resource %>

  <div class="container">
      <div class="page-inner no-page-title">
          <div id="main-wrapper">
              <div class="row">
                  <div class="col-lg-5 col-xl-3">
                  </div>

                  <div class="col-lg-7 col-xl-6">
                      <div class="card card-white grid-margin text-center">
                          <div class="card-body user-profile-card px-5 mb-3">
                              <div class="pt-4 pb-3">
                                  <% if @user.profile_image.attached? %>
                                    <%= image_tag(@user.profile_image, alt: "Profile Image", class: "rounded-circle", style: "height: 115px; width: 115px;") %>
                                  <% else %>
                                    <%= image_tag('default-profile.png', alt: 'Default profile', class: "rounded-circle", style: "height: 115px; width: 115px;") %>
                                  <% end %>
                              </div>

                              <div class="row align-items-center justify-content-center my-3">
                                  <div class="col-1">
                                      <i class="fa fa-upload"></i>
                                  </div>
                                  <div class="col-6" style="margin-left: -8px;">
                                      <div class="custom-file" style="width: 186px">
                                          <%= f.file_field :profile_image, class: 'custom-file-input' %>
                                          <label class="custom-file-label smaller-input text-left" for="<%= f.object_name %>_profile_image">Choose file</label>
                                      </div>
                                  </div>
                              </div>

                              <!-- Centered username field with icon -->
                              <div class="row align-items-center justify-content-center my-3">
                                  <div class="col-1">
                                      <i class="fa fa-user"></i>
                                  </div>
                                  <div class="col-6" style="margin-left: -8px;">
                                      <%= f.text_field :username, class: 'custom-text-field', style: 'width: 186px;' %>
                                  </div>
                              </div>
                            
                              <!-- Centered email field with icon -->
                              <div class="row align-items-center justify-content-center my-3">
                                  <div class="col-1">
                                      <i class="fa fa-envelope"></i>
                                  </div>
                                  <div class="col-6" style="margin-left: -8px;">
                                      <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'custom-text-field', style: 'width: 186px;' %>
                                  </div>
                              </div>

                              <hr class="my-4">

                              <!-- Edit Profile button on its own row with specific width -->
                              <div class="row mt-3 mb-4">
                                  <div class="col-12">
                                      <%= f.submit "Update", class: 'btn btn-dark w-50' %>
                                  </div>
                              </div>

                              <%= link_to 'Cancel', user_path(current_user), class: 'text-secondary small mx-3' %>

                              <%= link_to "Change password", send_reset_password_path, class: 'text-secondary small mx-3' %>

                              <%= link_to "Delete account", registration_path(resource_name), data: { confirm: "Are you sure?"}, method: :delete, class: 'text-secondary small mx-3' %></div>
                              
                          </div>    
                      </div>
                  </div>

                  <div class="col-lg-12 col-xl-3">
                  </div>
      
              </div>
          </div>
      </div>
  </div>

<% end %>